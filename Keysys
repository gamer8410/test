--========================================
-- REDZ HUB - JUNKIE KEY SYSTEM
--========================================

--// SERVICES
local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")

--// CONFIG
local CONFIG = {
    API_KEY = "e272e094-2f1e-45ff-a636-55b95ee83ffa",
    SERVICE = "RedsoulHub",
    MAIN_SCRIPT = "https://raw.githubusercontent.com/gamer8410/test/refs/heads/main/justtest"
}

local PROVIDERS = {
    ["6h"]  = "Checkpoint-1",
    ["12h"] = "12-hour-key",
    ["24h"] = "24-hour-key",
    ["48h"] = "48-hour-key"
}

--// LOAD JUNKIE SDK
local Junkie = loadstring(game:HttpGet(
    "https://junkie-development.de/sdk/JunkieKeySystem.lua"
))()

--// LOAD REDZ UI LIBRARY
local Library = loadstring(game:HttpGet(
    "https://raw.githubusercontent.com/tlredz/Library/refs/heads/main/redz-V5-remake/main.luau"
))()

--// CREATE WINDOW
local Window = Library:MakeWindow({
    Title = "Redz Hub",
    SubTitle = "Key System Verification",
    ScriptFolder = "redz-hub-keys"
})

--// CREATE MINIMIZER WITH MOBILE BUTTON
local Minimizer = Window:NewMinimizer({
    KeyCode = Enum.KeyCode.LeftControl
})

local MobileButton = Minimizer:CreateMobileMinimizer({
    Image = "rbxassetid://10734953451",
    BackgroundColor3 = Color3.fromRGB(138, 43, 226)
})

--// CREATE TABS
local KeyTab = Window:MakeTab({
    Title = "Get Key",
    Icon = "Key"
})

local VerifyTab = Window:MakeTab({
    Title = "Verify",
    Icon = "Shield"
})

--// NOTIFY FUNCTION
local function notify(title, content, duration)
    Window:Notify({
        Title = title or "Redz Hub",
        Content = content or "",
        Duration = duration or 3
    })
end

--// CLIPBOARD SAFE COPY
local function safeCopy(link)
    local ok = false
    if setclipboard then
        pcall(function()
            setclipboard(link)
            ok = true
        end)
    end
    if not ok then
        warn("[KEY LINK]:", link)
        notify("Clipboard Blocked", "Link printed in console (F9). Press F9 to view.", 5)
    end
    return ok
end

--// KEY TAB CONTENT
KeyTab:AddSection("Key Duration")

KeyTab:AddParagraph(
    "How to Get Your Key",
    "Click one of the buttons below to generate a key link.\nThe link will be copied to your clipboard automatically.\nComplete the steps and paste your key in the Verify tab."
)

KeyTab:AddButton({
    Name = "Get 6 Hour Key",
    Debounce = 1,
    Callback = function()
        notify("Generating Key", "Please wait...")
        
        local success, link = pcall(function()
            return Junkie.getLink(CONFIG.API_KEY, PROVIDERS["6h"], CONFIG.SERVICE)
        end)

        if success and typeof(link) == "string" and #link > 10 then
            if safeCopy(link) then
                notify("Success!", "6-hour key link copied to clipboard!", 4)
            end
        else
            notify("Error", "Failed to generate key link. Please try again.", 4)
        end
    end
})

KeyTab:AddButton({
    Name = "Get 12 Hour Key",
    Debounce = 1,
    Callback = function()
        notify("Generating Key", "Please wait...")
        
        local success, link = pcall(function()
            return Junkie.getLink(CONFIG.API_KEY, PROVIDERS["12h"], CONFIG.SERVICE)
        end)

        if success and typeof(link) == "string" and #link > 10 then
            if safeCopy(link) then
                notify("Success!", "12-hour key link copied to clipboard!", 4)
            end
        else
            notify("Error", "Failed to generate key link. Please try again.", 4)
        end
    end
})

KeyTab:AddButton({
    Name = "Get 24 Hour Key",
    Debounce = 1,
    Callback = function()
        notify("Generating Key", "Please wait...")
        
        local success, link = pcall(function()
            return Junkie.getLink(CONFIG.API_KEY, PROVIDERS["24h"], CONFIG.SERVICE)
        end)

        if success and typeof(link) == "string" and #link > 10 then
            if safeCopy(link) then
                notify("Success!", "24-hour key link copied to clipboard!", 4)
            end
        else
            notify("Error", "Failed to generate key link. Please try again.", 4)
        end
    end
})

KeyTab:AddButton({
    Name = "Get 48 Hour Key",
    Debounce = 1,
    Callback = function()
        notify("Generating Key", "Please wait...")
        
        local success, link = pcall(function()
            return Junkie.getLink(CONFIG.API_KEY, PROVIDERS["48h"], CONFIG.SERVICE)
        end)

        if success and typeof(link) == "string" and #link > 10 then
            if safeCopy(link) then
                notify("Success!", "48-hour key link copied to clipboard!", 4)
            end
        else
            notify("Error", "Failed to generate key link. Please try again.", 4)
        end
    end
})

KeyTab:AddSection()

KeyTab:AddDiscordInvite({
    Title = "Redz Hub | Community",
    Description = "Join our Discord for support, updates, and free keys!",
    Banner = Color3.fromRGB(138, 43, 226),
    Logo = "rbxassetid://10734953451",
    Invite = "https://discord.gg/wyx2tape4c",
    Members = 23,
    Online = 10
})

--// VERIFY TAB CONTENT
VerifyTab:AddSection("Enter Your Key")

VerifyTab:AddParagraph(
    "Verification Steps",
    "1. Get a key from the 'Get Key' tab\n2. Complete the key verification steps\n3. Paste your key below and click Verify Key"
)

local keyInput = ""

VerifyTab:AddTextBox({
    Name = "Key Input",
    Placeholder = "Paste your key here...",
    ClearOnFocus = false,
    Callback = function(Value)
        keyInput = Value
    end
})

VerifyTab:AddButton({
    Name = "Verify Key",
    Debounce = 2,
    Callback = function()
        local key = keyInput:gsub("%s+", "")
        
        if key == "" then
            notify("Error", "Please enter a key first!", 3)
            return
        end

        notify("Verifying", "Checking your key...")

        local ok = false
        local success = pcall(function()
            ok = Junkie.verifyKey(CONFIG.API_KEY, key, CONFIG.SERVICE)
        end)

        if success and ok then
            notify("Access Granted!", "Loading Redz Hub...", 2)
            
            task.wait(1)
            
            -- Destroy UI
            Library:Destroy()
            
            -- Load main script
            loadstring(game:HttpGet(CONFIG.MAIN_SCRIPT))()
        else
            notify("Invalid Key", "The key you entered is incorrect or expired.", 4)
        end
    end
})

VerifyTab:AddSection()

VerifyTab:AddParagraph(
    "Need Help?",
    "If you're having trouble:\n• Make sure you copied the entire key\n• Check if your key has expired\n• Try generating a new key\n• Join our Discord for support"
)

--// SELECT DEFAULT TAB
Window:SelectTab(KeyTab)

--// NOTIFICATION ON LOAD
notify("Welcome!", "Get your key to access Redz Hub", 4)
